CREATE TABLE [emcs].[EMCS_FOLLOW_UP_MESSAGES] (
    [ID]                      BIGINT          NOT NULL,
    [MESSAGE_TYPE]            VARCHAR (5)     NOT NULL,
    [MESSAGE_ID]              BIGINT          NOT NULL,
    [OFFICE_REFERENCE_NUMBER] VARCHAR (8)     NOT NULL,
    [STATUS]                  CHAR (1)        NOT NULL,
    [ARC]                     VARCHAR (21)    NOT NULL,
    [DESCRIPTION]             NVARCHAR (4000) NULL,
    [REPORT_TYPE]             CHAR (1)        NULL,
    [REPORT_NUMBER]           VARCHAR (16)    NULL,
    [CONTROL_TYPE]            VARCHAR (17)    NULL,
    [HAS_ATTACHMENTS]         CHAR (1)        NULL,
    [IS_LATEST]               CHAR (1)        NULL,
    [PARENT_ID]               BIGINT          NULL,
    [SENDER_MSA]              CHAR (2)        NULL,
    [RECIPIENT_MSA]           CHAR (2)        NULL,
    [CREATE_DATE]             DATETIME        NOT NULL,
    [CHANGE_DATE]             DATETIME        NOT NULL,
    [EVENT_REPORT_REFERENCE]  VARCHAR (35)    NULL,
    CONSTRAINT [PK_FOLLOW_UP_MESSAGES] PRIMARY KEY CLUSTERED ([ID] ASC) WITH (DATA_COMPRESSION = PAGE) ON [FG_EMCS],
    CONSTRAINT [AVCON_1310551205_MESSA_000] CHECK ([MESSAGE_TYPE]='IE861' OR [MESSAGE_TYPE]='IE840' OR [MESSAGE_TYPE]='IE807' OR [MESSAGE_TYPE]='IE717'),
    CONSTRAINT [AVCON_1310551205_REPOR_000] CHECK ([REPORT_TYPE]='C' OR [REPORT_TYPE]='I'),
    CONSTRAINT [AVCON_1310551205_STATU_000] CHECK ([STATUS]='I' OR [STATUS]='V' OR [STATUS]='N'),
    CONSTRAINT [AVCON_1311001741_HAS_A_000] CHECK ([HAS_ATTACHMENTS]='1' OR [HAS_ATTACHMENTS]='0'),
    CONSTRAINT [AVCON_1312300435_CONTR_000] CHECK ([CONTROL_TYPE]='ONWAY' OR [CONTROL_TYPE]='PLACE_OF_DELIVERY' OR [CONTROL_TYPE]='PLACE_OF_DISPATCH'),
    CONSTRAINT [AVCON_1312816249_IS_LA_000] CHECK ([IS_LATEST]='1' OR [IS_LATEST]='0'),
    CONSTRAINT [CH_FOLLOW_UP_MESSAGES_1] CHECK ([MESSAGE_TYPE]='IE807' AND [REPORT_TYPE] IS NULL AND [REPORT_NUMBER] IS NULL AND [EVENT_REPORT_REFERENCE] IS NULL AND [CONTROL_TYPE] IS NULL AND [HAS_ATTACHMENTS] IS NULL AND [IS_LATEST] IS NULL AND [PARENT_ID] IS NULL AND [SENDER_MSA] IS NULL AND [RECIPIENT_MSA] IS NULL OR [MESSAGE_TYPE]='IE861' AND [REPORT_TYPE] IS NULL AND [REPORT_NUMBER] IS NULL AND [EVENT_REPORT_REFERENCE] IS NULL AND [CONTROL_TYPE] IS NULL AND [IS_LATEST] IS NULL AND [PARENT_ID] IS NULL AND [SENDER_MSA] IS NOT NULL AND [RECIPIENT_MSA] IS NOT NULL OR [MESSAGE_TYPE]='IE717' AND [EVENT_REPORT_REFERENCE] IS NULL AND [SENDER_MSA] IS NULL AND [RECIPIENT_MSA] IS NULL OR [MESSAGE_TYPE]='IE840' AND [SENDER_MSA] IS NULL AND [RECIPIENT_MSA] IS NULL)
);

